# MT5 外汇黄金交易日志打印模板 - 快速参考

## 概述

这是一个从 Crypto 交易机器人改进而来的外汇黄金交易日志打印模板。主要改进包括：

### 术语映射表

| Crypto 版本 | 外汇黄金版本 | 说明 |
|-----------|-----------|------|
| 币名/币种 | 品种 (Symbol) | XAUUSD, EURUSD 等 |
| 交易所 | 经纪商 (Broker) | STARTRADER, Exness, TMGM 等 |
| 杠杆倍数 (10x) | 杠杆比例 (1:500) | 外汇通常用比例表示 |
| 投入保证金 | 占用保证金 (Used Margin) | 实际占用的账户资金 |
| 杠杆后货值 | 名义价值 (Notional Value) | 合约的实际价值 |
| 下单数量 (USDT) | 交易手数 (Lots) | 外汇以手为单位 |

## 使用方法

### 基础调用

```python
from 交易日志打印模板_MT5 import 打印开仓日志

# 账户信息
账户数据 = {
    "总资产": 1147.66,           # 账户净值
    "可用余额": 1136.37,         # 可用保证金
    "可用百分比": 99.02,         # 可用占比
    "风险率": 2.10               # 风险率
}

# 交易参数
交易数据 = {
    "手数": 0.1,                 # 交易手数
    "入场价": 2030.50,           # 开仓价格
    "止损价": 2020.00,           # 止损价格
    "止损幅": 0.52,              # 止损幅度 (%)
    "止盈目标": [2040.50, 2050.50, 2070.50],  # 止盈价位列表
    "名义价值": 20305.00,        # 合约名义价值
    "占用保证金": 40.61,         # 所需保证金
    "杠杆比例": "1:500",         # 杠杆比例
    "KOL权重": 0.7               # 信号权重
}

# 打印日志
打印开仓日志("黄金帝国", "XAUUSD", "做多", "STARTRADER", 账户数据, 交易数据)
```

### 输出示例

```
[19:17:13]
================================================================================
👤 [黄金帝国] 💠指令: 开仓 🟡品种: XAUUSD | 📈做多 | 🏦 STARTRADER
[19:17:13] 🔍 [准备开仓] 品种: XAUUSD
🛠 杠杆: 1:500 | 止损幅 0.52% | KOL权重 0.7
💰 总资产: 1147.66 | 可用: 1136.37 USD (99.02% - 3.54% = 96.46%)
💵 占用保证金: 40.61 USD (⏱3.54%)
📦 名义价值: 20305.00 USD (⏱1769.25%)
🔄 均价: 2030.5000 🥇止盈: 2040.5000(+10.0) 2050.5000(+20.0) 2070.5000(+40.0) ☠️止损: 2020.0000(-10.500) | ⚖️ 盈亏比: 1.0R
📄 执行挂单 (交易手数):
      [1] ⏳ 开仓价 2030.50 | 💸0.10手
✅ 部署完毕 (1单)
================================================================================
```

## 关键参数说明

### 账户信息 (账户数据)

- **总资产**: 账户当前净值（USD）
- **可用余额**: 未被占用的保证金
- **可用百分比**: 可用余额占总资产的百分比
- **风险率**: 本单风险占账户的百分比

### 交易参数 (交易数据)

- **手数**: 交易量，1手 = 100盎司（黄金）或 100,000单位（货币对）
- **入场价**: 开仓价格（4位小数精度）
- **止损价**: 止损价格
- **止损幅**: 止损距离占入场价的百分比
- **止盈目标**: 多个止盈价位，支持分批止盈
- **名义价值**: 合约的实际价值 = 手数 × 价格 × 合约单位
- **占用保证金**: 根据杠杆比例计算的所需保证金
- **杠杆比例**: 通常为 1:100 ~ 1:500
- **KOL权重**: 信号来源的权重系数（0.0 ~ 1.0）

## 数据计算示例

### XAUUSD (黄金) - 做多 0.1 手

```
入场价: 2030.50
止损价: 2020.00
止损距离: 10.50 点

名义价值 = 0.1 手 × 2030.50 × 100 = 20,305 USD
占用保证金 = 20,305 / 500 = 40.61 USD (按 1:500 杠杆)

止盈1: 2040.50 (+10.0 点, +1.0R)
止盈2: 2050.50 (+20.0 点, +2.0R)
止盈3: 2070.50 (+40.0 点, +4.0R)
```

### EURUSD (欧美) - 做空 0.2 手

```
入场价: 1.0850
止损价: 1.0900
止损距离: 0.0050 (50 点)

名义价值 = 0.2 手 × 1.0850 × 100,000 = 21,700 USD
占用保证金 = 21,700 / 500 = 43.40 USD (按 1:500 杠杆)

止盈1: 1.0800 (-0.0050, -1.0R)
止盈2: 1.0750 (-0.0100, -2.0R)
```

## 集成到执行端

在 `执行端.py` 中集成此模板：

```python
from 交易日志打印模板_MT5 import 打印开仓日志

# 在下单前打印日志
账户数据 = {
    "总资产": MT5核心.获取账户余额(),
    "可用余额": MT5核心.获取可用保证金(),
    "可用百分比": (可用 / 总资产) * 100,
    "风险率": (占用保证金 / 总资产) * 100
}

交易数据 = {
    "手数": 计算的手数,
    "入场价": 挂单价,
    "止损价": 止损,
    "止损幅": ((挂单价 - 止损) / 挂单价) * 100,
    "止盈目标": TP列表,
    "名义价值": 手数 * 入场价 * 合约单位,
    "占用保证金": 计算的保证金,
    "杠杆比例": "1:500",
    "KOL权重": KOL权重
}

打印开仓日志(KOL名称, 品种, 方向, 经纪商, 账户数据, 交易数据)
```

## 注意事项

1. **精度**: 黄金价格使用 4 位小数，货币对根据品种调整
2. **手数单位**:
   - 黄金 (XAUUSD): 1 手 = 100 盎司
   - 货币对 (EURUSD 等): 1 手 = 100,000 单位
3. **杠杆比例**: 根据经纪商和账户类型调整（通常 1:100 ~ 1:500）
4. **Windows 编码**: 已内置 UTF-8 支持，无需额外配置

## 文件位置

- 模板文件: `交易日志打印模板_MT5.py`
- 快速参考: `交易日志打印模板_说明.md` (本文件)
